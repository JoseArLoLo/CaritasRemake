Conekta.setPublicKey("key_Mj1QTbILuGHuZqm70znFahZ");const overlay=document.getElementById("overlay"),placeholder="donar/";var invoiceCheck=document.getElementById("factura"),mail=document.getElementById("email"),otherAmount=document.getElementById("otherAmount"),selectAmount=document.getElementById("amountSelect"),totalInvoicement=document.getElementById("total");selectAmount.addEventListener("change",(function(){"0"===selectAmount.value?(otherAmount.setAttribute("required",""),otherAmount.classList.add("active"),otherAmount.focus(),selectAmount.removeAttribute("required"),selectAmount.value=""):(otherAmount.removeAttribute("required"),otherAmount.classList.remove("active"),otherAmount.value="",selectAmount.setAttribute("required",""),totalInvoicement.value=selectAmount.value)})),otherAmount.addEventListener("change",(function(){totalInvoicement.value=otherAmount.value})),invoiceCheck.addEventListener("click",(function(){invoiceCheck.checked?(mail.removeAttribute("hidden"),mail.value=""):(mail.setAttribute("hidden",""),mail.value="")}));var conektaSuccessResponseHandler=function(e){$("#conektaTokenId").val(e.id),console.log(e.id),jsPay()},conektaErrorResponseHandler=function(e){$("#card-form");alert("Hubo un error en los datos de la tarjeta"),overlay.classList.remove("active")};function jsPay(){let e=$("#card-form").serialize().split("&").filter((e=>!e.startsWith("amountSelect=")&&!e.startsWith("otherAmount="))).join("&");$.ajax({type:"POST",url:"donar/pay.php",data:e,success:function(e){1==e?(jsClean(),alert("Tu pago se realizó con éxito"),overlay.classList.remove("active"),window.location.href="donar/agradecimiento.php"):(alert(e),overlay.classList.remove("active"))}})}function jsClean(){document.getElementById("name").value="",document.getElementById("nombres").value="",document.getElementById("apellido_paterno").value="",document.getElementById("apellido_materno").value="",document.getElementById("card").value="",document.getElementById("exp_month").value="",document.getElementById("exp_year").value="",document.getElementById("cvc").value="",$("#conektaTokenId").prop("value","")}function validarFormulario(){return!!document.getElementById("terminos").checked||(alert("Debes aceptar los términos y condiciones para continuar"),!1)}function combinarNombres(){var e=document.getElementById("nombres").value+" "+document.getElementById("apellido_paterno").value+" "+document.getElementById("apellido_materno").value;document.getElementById("name").value=e}$(document).ready((function(){$("#card-form").submit((function(e){if(overlay.classList.add("active"),!validarFormulario())return e.preventDefault(),void overlay.classList.remove("active");e.preventDefault(),combinarNombres();var t=$("#card-form");Conekta.Token.create(t,conektaSuccessResponseHandler,conektaErrorResponseHandler)}))}));
//# sourceMappingURL=donar.js.map
