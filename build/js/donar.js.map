{"version":3,"file":"donar.js","names":["Conekta","setPublicKey","overlay","document","getElementById","placeholder","invoiceCheck","mail","otherAmount","selectAmount","totalInvoicement","addEventListener","value","setAttribute","classList","add","focus","removeAttribute","remove","checked","conektaSuccessResponseHandler","token","$","val","id","console","log","jsPay","conektaErrorResponseHandler","response","alert","updatedParams","serialize","split","filter","param","startsWith","join","ajax","type","url","data","success","jsClean","window","location","href","prop","validarFormulario","combinarNombres","nombreCompleto","ready","submit","e","preventDefault","form","Token","create"],"sources":["donar.js"],"mappings":"AAAAA,QAAQC,aAAa,+BACrB,MAAMC,QAAUC,SAASC,eAAe,WAClCC,YAAc,SACpB,IAAIC,aAAeH,SAASC,eAAe,WACvCG,KAAOJ,SAASC,eAAe,SAC/BI,YAAcL,SAASC,eAAe,eACtCK,aAAeN,SAASC,eAAe,gBACvCM,iBAAmBP,SAASC,eAAe,SAE/CK,aAAaE,iBAAiB,UAAU,WACT,MAAvBF,aAAaG,OACbJ,YAAYK,aAAa,WAAY,IACrCL,YAAYM,UAAUC,IAAI,UAC1BP,YAAYQ,QAEZP,aAAaQ,gBAAgB,YAC7BR,aAAaG,MAAQ,KAErBJ,YAAYS,gBAAgB,YAC5BT,YAAYM,UAAUI,OAAO,UAC7BV,YAAYI,MAAQ,GAEpBH,aAAaI,aAAa,WAAY,IACtCH,iBAAiBE,MAAQH,aAAaG,MAE9C,IAEAJ,YAAYG,iBAAiB,UAAU,WACnCD,iBAAiBE,MAAQJ,YAAYI,KACzC,IAEAN,aAAaK,iBAAiB,SAAS,WAC/BL,aAAaa,SACbZ,KAAKU,gBAAgB,UACrBV,KAAKK,MAAQ,KAEbL,KAAKM,aAAa,SAAU,IAC5BN,KAAKK,MAAQ,GAErB,IAEA,IAAIQ,8BAAgC,SAAUC,GAC1CC,EAAE,mBAAmBC,IAAIF,EAAMG,IAC/BC,QAAQC,IAAIL,EAAMG,IAClBG,OACJ,EAEIC,4BAA8B,SAAUC,GAC7BP,EAAE,cACbQ,MAAM,4CACN5B,QAAQY,UAAUI,OAAO,SAC7B,EAkBA,SAASS,QACL,IACII,EADST,EAAE,cAAcU,YACFC,MAAM,KAAKC,QAAOC,IAAUA,EAAMC,WAAW,mBAAqBD,EAAMC,WAAW,kBAAiBC,KAAK,KAGpIf,EAAEgB,KAAK,CACHC,KAAM,OACNC,IAJMnC,gBAKNoC,KAAMV,EACNW,QAAS,SAAUD,GACH,GAARA,GACAE,UACAb,MAAM,gCACN5B,QAAQY,UAAUI,OAAO,UACzB0B,OAAOC,SAASC,KAAOzC,6BAGvByB,MAAMW,GACNvC,QAAQY,UAAUI,OAAO,UAEjC,GAER,CAEA,SAASyB,UACLxC,SAASC,eAAe,QAAQQ,MAAQ,GACxCT,SAASC,eAAe,WAAWQ,MAAQ,GAC3CT,SAASC,eAAe,oBAAoBQ,MAAQ,GACpDT,SAASC,eAAe,oBAAoBQ,MAAQ,GACpDT,SAASC,eAAe,QAAQQ,MAAQ,GACxCT,SAASC,eAAe,aAAaQ,MAAQ,GAC7CT,SAASC,eAAe,YAAYQ,MAAQ,GAC5CT,SAASC,eAAe,OAAOQ,MAAQ,GACvCU,EAAE,mBAAmByB,KAAK,QAAS,GACvC,CACA,SAASC,oBAKL,QAHe7C,SAASC,eAAe,YAGzBe,UACVW,MAAM,4DACC,EAGf,CACA,SAASmB,kBAEL,IAKIC,EALU/C,SAASC,eAAe,WAAWQ,MAKlB,IAJTT,SAASC,eAAe,oBAAoBQ,MAIX,IAHjCT,SAASC,eAAe,oBAAoBQ,MAMlET,SAASC,eAAe,QAAQQ,MAAQsC,CAC5C,CAzEA5B,EAAEnB,UAAUgD,OAAM,WACd7B,EAAE,cAAc8B,QAAO,SAAUC,GAE7B,GADAnD,QAAQY,UAAUC,IAAI,WACjBiC,oBAGD,OAFAK,EAAEC,sBACFpD,QAAQY,UAAUI,OAAO,UAGzBmC,EAAEC,iBACFL,kBACA,IAAIM,EAAOjC,EAAE,cACbtB,QAAQwD,MAAMC,OAAOF,EAAMnC,8BAA+BQ,4BAElE,GACJ","ignoreList":[],"sourcesContent":["Conekta.setPublicKey(\"key_Mj1QTbILuGHuZqm70znFahZ\"); // Llave publica de conekta\r\nconst overlay = document.getElementById(\"overlay\");\r\nconst placeholder = 'donar/';\r\nvar invoiceCheck = document.getElementById('factura');\r\nvar mail = document.getElementById('email');\r\nvar otherAmount = document.getElementById('otherAmount');\r\nvar selectAmount = document.getElementById('amountSelect');\r\nvar totalInvoicement = document.getElementById('total');\r\n\r\nselectAmount.addEventListener('change', function() { //Hacer esta wea de seleccionar otros\r\n    if (selectAmount.value === '0') {\r\n        otherAmount.setAttribute('required', '');\r\n        otherAmount.classList.add('active');\r\n        otherAmount.focus();\r\n\r\n        selectAmount.removeAttribute('required');\r\n        selectAmount.value = '';\r\n    } else {\r\n        otherAmount.removeAttribute('required');\r\n        otherAmount.classList.remove('active');\r\n        otherAmount.value = '';\r\n        \r\n        selectAmount.setAttribute('required', '');\r\n        totalInvoicement.value = selectAmount.value;\r\n    }\r\n});\r\n\r\notherAmount.addEventListener('change', function() {\r\n    totalInvoicement.value = otherAmount.value;\r\n});\r\n\r\ninvoiceCheck.addEventListener('click', function() {\r\n    if (invoiceCheck.checked) {\r\n        mail.removeAttribute('hidden');\r\n        mail.value = '';\r\n    } else {\r\n        mail.setAttribute('hidden', '');\r\n        mail.value = '';\r\n    }\r\n});\r\n\r\nvar conektaSuccessResponseHandler = function (token) {\r\n    $('#conektaTokenId').val(token.id);\r\n    console.log(token.id);\r\n    jsPay();\r\n}\r\n\r\nvar conektaErrorResponseHandler = function (response) {\r\n    var form = $('#card-form');\r\n    alert('Hubo un error en los datos de la tarjeta');\r\n    overlay.classList.remove(\"active\");\r\n}\r\n\r\n$(document).ready(function () {\r\n    $('#card-form').submit(function (e) {\r\n        overlay.classList.add(\"active\");\r\n        if (!validarFormulario()) {\r\n            e.preventDefault();\r\n            overlay.classList.remove(\"active\");\r\n            return;\r\n        } else {\r\n            e.preventDefault();\r\n            combinarNombres();\r\n            var form = $('#card-form');\r\n            Conekta.Token.create(form, conektaSuccessResponseHandler, conektaErrorResponseHandler);\r\n        }\r\n    });\r\n});\r\n\r\nfunction jsPay() {\r\n    let params = $('#card-form').serialize();\r\n    let updatedParams = params.split('&').filter(param => !param.startsWith('amountSelect=') && !param.startsWith('otherAmount=')).join('&');\r\n    let url = placeholder + 'pay.php';\r\n\r\n    $.ajax({\r\n        type: 'POST',\r\n        url: url,\r\n        data: updatedParams,\r\n        success: function (data) {\r\n            if (data == 1) {\r\n                jsClean();\r\n                alert('Tu pago se realizó con éxito');\r\n                overlay.classList.remove(\"active\");\r\n                window.location.href = placeholder + 'agradecimiento.php';\r\n                //Redirigir a la pantalla de agradecimiento\r\n            } else {\r\n                alert(data);\r\n                overlay.classList.remove(\"active\");\r\n            }\r\n        }\r\n    });\r\n}\r\n\r\nfunction jsClean() {\r\n    document.getElementById('name').value = '';\r\n    document.getElementById('nombres').value = '';\r\n    document.getElementById('apellido_paterno').value = '';\r\n    document.getElementById('apellido_materno').value = '';\r\n    document.getElementById('card').value = '';\r\n    document.getElementById('exp_month').value = '';\r\n    document.getElementById('exp_year').value = '';\r\n    document.getElementById('cvc').value = '';\r\n    $('#conektaTokenId').prop('value', '');\r\n}\r\nfunction validarFormulario() {\r\n    // Obtén el checkbox\r\n    var checkbox = document.getElementById('terminos');\r\n\r\n    // Verifica si está marcado\r\n    if (!checkbox.checked) {\r\n        alert(\"Debes aceptar los términos y condiciones para continuar\");\r\n        return false;\r\n    }\r\n    return true;\r\n}\r\nfunction combinarNombres() {\r\n    // Obtén los valores de los campos de nombre\r\n    var nombres = document.getElementById('nombres').value;\r\n    var apellidoPaterno = document.getElementById('apellido_paterno').value;\r\n    var apellidoMaterno = document.getElementById('apellido_materno').value;\r\n\r\n    // Combina los nombres en un solo campo\r\n    var nombreCompleto = nombres + ' ' + apellidoPaterno + ' ' + apellidoMaterno;\r\n\r\n    // Asigna el valor combinado al campo oculto con data-conekta=\"card[name]\"\r\n    document.getElementById('name').value = nombreCompleto;\r\n}"]}