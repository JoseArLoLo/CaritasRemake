{"version":3,"file":"donar.js","names":["Conekta","setPublicKey","overlay","document","getElementById","placeholder","conektaSuccessResponseHandler","token","$","val","id","console","log","jsPay","conektaErrorResponseHandler","response","alert","classList","remove","params","serialize","ajax","type","url","data","success","jsClean","window","location","href","value","prop","validarFormulario","checked","combinarNombres","nombreCompleto","ready","submit","e","add","preventDefault","form","Token","create"],"sources":["donar.js"],"mappings":"AAAAA,QAAQC,aAAa,+BACrB,MAAMC,QAAUC,SAASC,eAAe,WAClCC,YAAc,SACpB,IAAIC,8BAAgC,SAAUC,GAC1CC,EAAE,mBAAmBC,IAAIF,EAAMG,IAC/BC,QAAQC,IAAIL,EAAMG,IAClBG,OAEJ,EACIC,4BAA8B,SAAUC,GAC7BP,EAAE,cAEbQ,MAAM,4CACNd,QAAQe,UAAUC,OAAO,SAC7B,EAiBA,SAASL,QACL,IAAIM,EAASX,EAAE,cAAcY,YAG7BZ,EAAEa,KAAK,CACHC,KAAM,OACNC,IAJMlB,gBAKNmB,KAAML,EACNM,QAAS,SAAUD,GACH,GAARA,GACAE,UACAV,MAAM,gCACNd,QAAQe,UAAUC,OAAO,UACzBS,OAAOC,SAASC,KAAOxB,6BAGvBW,MAAMQ,GACNtB,QAAQe,UAAUC,OAAO,UAEjC,GAER,CAEA,SAASQ,UACLvB,SAASC,eAAe,QAAQ0B,MAAQ,GACxC3B,SAASC,eAAe,WAAW0B,MAAQ,GAC3C3B,SAASC,eAAe,oBAAoB0B,MAAQ,GACpD3B,SAASC,eAAe,oBAAoB0B,MAAQ,GACpD3B,SAASC,eAAe,QAAQ0B,MAAQ,GACxC3B,SAASC,eAAe,aAAa0B,MAAQ,GAC7C3B,SAASC,eAAe,YAAY0B,MAAQ,GAC5C3B,SAASC,eAAe,OAAO0B,MAAQ,GACvCtB,EAAE,mBAAmBuB,KAAK,QAAS,GACvC,CACA,SAASC,oBAKL,QAHe7B,SAASC,eAAe,YAGzB6B,UACVjB,MAAM,4DACC,EAGf,CACA,SAASkB,kBAEL,IAKIC,EALUhC,SAASC,eAAe,WAAW0B,MAKlB,IAJT3B,SAASC,eAAe,oBAAoB0B,MAIX,IAHjC3B,SAASC,eAAe,oBAAoB0B,MAMlE3B,SAASC,eAAe,QAAQ0B,MAAQK,CAC5C,CAxEA3B,EAAEL,UAAUiC,OAAM,WACd5B,EAAE,cAAc6B,QAAO,SAAUC,GAE7B,GADApC,QAAQe,UAAUsB,IAAI,WACjBP,oBAGD,OAFAM,EAAEE,sBACFtC,QAAQe,UAAUC,OAAO,UAGzBoB,EAAEE,iBACFN,kBACA,IAAIO,EAAOjC,EAAE,cACbR,QAAQ0C,MAAMC,OAAOF,EAAMnC,8BAA+BQ,4BAElE,GACJ","ignoreList":[],"sourcesContent":["Conekta.setPublicKey(\"key_Mj1QTbILuGHuZqm70znFahZ\"); // Llave publica de conekta\r\nconst overlay = document.getElementById(\"overlay\");\r\nconst placeholder = 'donar/';\r\nvar conektaSuccessResponseHandler = function (token) {\r\n    $('#conektaTokenId').val(token.id);\r\n    console.log(token.id);\r\n    jsPay();\r\n\r\n}\r\nvar conektaErrorResponseHandler = function (response) {\r\n    var form = $('#card-form');\r\n    // alert(response.message_to_purchaser);\r\n    alert('Hubo un error en los datos de la tarjeta');\r\n    overlay.classList.remove(\"active\");\r\n}\r\n$(document).ready(function () {\r\n    $('#card-form').submit(function (e) {\r\n        overlay.classList.add(\"active\");\r\n        if (!validarFormulario()) {\r\n            e.preventDefault();\r\n            overlay.classList.remove(\"active\");\r\n            return;\r\n        } else {\r\n            e.preventDefault();\r\n            combinarNombres();\r\n            var form = $('#card-form');\r\n            Conekta.Token.create(form, conektaSuccessResponseHandler, conektaErrorResponseHandler);\r\n        }\r\n    });\r\n});\r\n\r\nfunction jsPay() {\r\n    let params = $('#card-form').serialize();\r\n    let url = placeholder + 'pay.php';\r\n\r\n    $.ajax({\r\n        type: 'POST',\r\n        url: url,\r\n        data: params,\r\n        success: function (data) {\r\n            if (data == 1) {\r\n                jsClean();\r\n                alert('Tu pago se realizó con éxito');\r\n                overlay.classList.remove(\"active\");\r\n                window.location.href = placeholder + 'agradecimiento.php';\r\n                //Redirigir a la pantalla de agradecimiento\r\n            } else {\r\n                alert(data);\r\n                overlay.classList.remove(\"active\");\r\n            }\r\n        }\r\n    });\r\n}\r\n\r\nfunction jsClean() {\r\n    document.getElementById('name').value = '';\r\n    document.getElementById('nombres').value = '';\r\n    document.getElementById('apellido_paterno').value = '';\r\n    document.getElementById('apellido_materno').value = '';\r\n    document.getElementById('card').value = '';\r\n    document.getElementById('exp_month').value = '';\r\n    document.getElementById('exp_year').value = '';\r\n    document.getElementById('cvc').value = '';\r\n    $('#conektaTokenId').prop('value', '');\r\n}\r\nfunction validarFormulario() {\r\n    // Obtén el checkbox\r\n    var checkbox = document.getElementById('terminos');\r\n\r\n    // Verifica si está marcado\r\n    if (!checkbox.checked) {\r\n        alert(\"Debes aceptar los términos y condiciones para continuar\");\r\n        return false;\r\n    }\r\n    return true;\r\n}\r\nfunction combinarNombres() {\r\n    // Obtén los valores de los campos de nombre\r\n    var nombres = document.getElementById('nombres').value;\r\n    var apellidoPaterno = document.getElementById('apellido_paterno').value;\r\n    var apellidoMaterno = document.getElementById('apellido_materno').value;\r\n\r\n    // Combina los nombres en un solo campo\r\n    var nombreCompleto = nombres + ' ' + apellidoPaterno + ' ' + apellidoMaterno;\r\n\r\n    // Asigna el valor combinado al campo oculto con data-conekta=\"card[name]\"\r\n    document.getElementById('name').value = nombreCompleto;\r\n}"]}