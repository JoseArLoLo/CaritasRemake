{"version":3,"file":"donar.js","names":["Conekta","setPublicKey","conektaSuccessResponseHandler","token","$","val","id","console","log","jsPay","conektaErrorResponseHandler","response","alert","message_to_purchaser","params","serialize","ajax","type","url","data","success","jsClean","prop","validarFormulario","document","getElementById","checked","combinarNombres","nombreCompleto","value","ready","submit","e","preventDefault","form","Token","create"],"sources":["donar.js"],"mappings":"AAAAA,QAAQC,aAAa,+BAErB,IAAIC,8BAAgC,SAAUC,GAC1CC,EAAE,mBAAmBC,IAAIF,EAAMG,IAC/BC,QAAQC,IAAIL,EAAMG,IAClBG,OAEJ,EACIC,4BAA8B,SAAUC,GAC7BP,EAAE,cACbQ,MAAMD,EAASE,qBACnB,EAeA,SAASJ,QACL,IAAIK,EAASV,EAAE,cAAcW,YAG7BX,EAAEY,KAAK,CACHC,KAAM,OACNC,IAJM,gBAKNC,KAAML,EACNM,QAAS,SAAUD,GACH,GAARA,GACAP,MAAM,gCACNS,WAEAT,MAAMO,EAEd,GAER,CAEA,SAASE,UACLjB,EAAE,iBAAiBkB,KAAK,QAAS,IACjClB,EAAE,mBAAmBkB,KAAK,QAAS,GACvC,CACA,SAASC,oBAKL,QAHeC,SAASC,eAAe,YAGzBC,UACVd,MAAM,4DACC,EAGf,CACA,SAASe,kBAEL,IAKIC,EALUJ,SAASC,eAAe,WAAWI,MAKlB,IAJTL,SAASC,eAAe,oBAAoBI,MAIX,IAHjCL,SAASC,eAAe,oBAAoBI,MAMlEL,SAASC,eAAe,QAAQI,MAAQD,CAC5C,CA3DAxB,EAAEoB,UAAUM,OAAM,WACd1B,EAAE,cAAc2B,QAAO,SAAUC,GAC7B,GAAKT,oBAAL,CAIIS,EAAEC,iBACFN,kBACA,IAAIO,EAAO9B,EAAE,cACbJ,QAAQmC,MAAMC,OAAOF,EAAMhC,8BAA+BQ,4BAC9D,MAPIsB,EAAEC,gBAQV,GACJ","ignoreList":[],"sourcesContent":["Conekta.setPublicKey(\"key_Mj1QTbILuGHuZqm70znFahZ\"); // Llave publica de conekta\r\n\r\nvar conektaSuccessResponseHandler = function (token) {\r\n    $('#conektaTokenId').val(token.id);\r\n    console.log(token.id);\r\n    jsPay();\r\n\r\n}\r\nvar conektaErrorResponseHandler = function (response) {\r\n    var form = $('#card-form');\r\n    alert(response.message_to_purchaser);\r\n}\r\n$(document).ready(function () {\r\n    $('#card-form').submit(function (e) {\r\n        if (!validarFormulario()) {\r\n            e.preventDefault();\r\n            return;\r\n        } else {\r\n            e.preventDefault();\r\n            combinarNombres();\r\n            var form = $('#card-form');\r\n            Conekta.Token.create(form, conektaSuccessResponseHandler, conektaErrorResponseHandler);\r\n        }\r\n    });\r\n});\r\n\r\nfunction jsPay() {\r\n    let params = $('#card-form').serialize();\r\n    let url = 'donar/pay.php';\r\n\r\n    $.ajax({\r\n        type: 'POST',\r\n        url: url,\r\n        data: params,\r\n        success: function (data) {\r\n            if (data == 1) {\r\n                alert('Tu pago se realizó con éxito');\r\n                jsClean();\r\n            } else {\r\n                alert(data);\r\n            }\r\n        }\r\n    });\r\n}\r\n\r\nfunction jsClean() {\r\n    $('.form-control').prop('value', '');\r\n    $('#conektaTokenId').prop('value', '');\r\n}\r\nfunction validarFormulario() {\r\n    // Obtén el checkbox\r\n    var checkbox = document.getElementById('terminos');\r\n\r\n    // Verifica si está marcado\r\n    if (!checkbox.checked) {\r\n        alert(\"Debes aceptar los términos y condiciones para continuar\");\r\n        return false;\r\n    }\r\n    return true;\r\n}\r\nfunction combinarNombres() {\r\n    // Obtén los valores de los campos de nombre\r\n    var nombres = document.getElementById('nombres').value;\r\n    var apellidoPaterno = document.getElementById('apellido_paterno').value;\r\n    var apellidoMaterno = document.getElementById('apellido_materno').value;\r\n\r\n    // Combina los nombres en un solo campo\r\n    var nombreCompleto = nombres + ' ' + apellidoPaterno + ' ' + apellidoMaterno;\r\n\r\n    // Asigna el valor combinado al campo oculto con data-conekta=\"card[name]\"\r\n    document.getElementById('name').value = nombreCompleto;\r\n}"]}